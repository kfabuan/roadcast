<!-- FOR GEN PUB & MEMBERS NAVBAR (ONCE LOGGED IN TO ROADCAST)-->
{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- css & bootstrap -->
    <link rel="stylesheet" href="{% static 'css/nav.css' %}">
    <link rel="stylesheet" href="{% static 'css/member_prof.css' %}">
    <!-- <link rel="stylesheet" href="{% static 'css/profile.css' %}">
    <link rel="stylesheet" href="{% static 'css/edit_profile.css' %}"> -->

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KyZXEAg3QhqLMpG8r+8fhAXLRk2vvoC2f3B09zVXn8CA5QIVfZOJ3BCsw2P0p/We" crossorigin="anonymous">    
    
    <!-- Scripts -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>

    <!-- Font -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css">
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet" />

    <!-- Favicon & icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css">
    <link href='https://unpkg.com/boxicons@2.0.9/css/boxicons.min.css' rel='stylesheet'>
    <link rel="shortcut icon" href="{% static 'image/logo1.png' %}" type="image/x-icon">


    {% block design %}  {% endblock %}

    <title>Roadcast | {% block title %} {% endblock %}</title>
    <style>
        body {
            background-color: #e8f4f8;
        }
        
        .l-navbar {
        background-color: rgb(27, 38, 49);
        }

        .header_toggle {
        color: rgb(27, 38, 49) !important;
        }
        .bg-custom {
            --bs-bg-opacity: 1;
            background-color: #0F4C81!important;
        }
        .bg-custom2 {
            --bs-bg-opacity: 1;
            background-color: #033FFF!important;
        }
        .bg-custom3 {
            --bs-bg-opacity: 1;
            background-color: #787A91!important;
        }
        .bg-custom4 {
            --bs-bg-opacity: 1;
            background-color: #FFA41B!important;
        }
      </style>

    <script>function display_ct6() {
        var x = new Date()
        var ampm = x.getHours( ) >= 12 ? ' PM' : ' AM';
        hours = x.getHours( ) % 12;
        hours = hours ? hours : 12;
        var x1=x.getMonth() + 1+ "/" + x.getDate() + "/" + x.getFullYear(); 
        x1 = x1 + " - " +  hours + ":" +  x.getMinutes() + ":" +  x.getSeconds() + "" + ampm;
        document.getElementById('ct6').innerHTML = x1;
        display_c6();
        }
        function display_c6(){
        var refresh=1000; // Refresh rate in milli seconds
        mytime=setTimeout('display_ct6()',refresh)
        }
        display_c6()
    </script>
</head>
<body id="body-pd"> 
    <header class="header" id="header" style="background-color: transparent; opacity: 1">
        
        <!-- Menu icon -->
        <div class="header_toggle row"> 

            <div class="col-2">
                <i class='bx bx-menu' id="header-toggle" style="font-size: 1.5rem;"></i>
            </div>

            <div class="col-10 pb-3">
                <b id="date-today" style="font-size: small;">Today: </b>
                <span id="ct6" style="font-size: small;"></span>
            </div>
            
        </div>
        
        <!------------------------------- NAVBAR FOR PNP MEMBERS ----------------------------------------->
        {% for a in all %}
        {% ifequal a.id request.session.authorized_id %}
        <!-- Profile picture -->
        <div class="header_img"> 
            <a href="{% url 'user_profile'%}">
                <img src="/media/{{ a.Members_Pic }}" alt="Profile">
            </a>
        </div>
    </header>
    <!-- Navbar -->
    <div class="l-navbar" id="nav-bar">
        <nav class="nav main-nav">
            <!-- <div> 
            <a href="{% url 'dashboard' %}" class="nav_logo">
                <i class='bx bx-car nav_logo-icon'></i> 
                <span class="nav_logo-name"><label style="color: #fff">ROAD</label><label style="color: #19B3D3">CAST</label>
                </span>
            </a> -->
            <div> 
                <a href="{% url 'dashboard' %}" class="nav_logo">
                    <img src="{% static 'image/logo1.png' %}" class="img-fluid" style="width: 35px; margin-left:-5px;"></i> 
                    <span class="nav_logo-name">
                        <label style="color: #fff">ROAD</label><label style="color: #19B3D3">CAST</label></span> 
                    </a>
                <div class="nav_list"> 
                    {% if a.Members_User.Member_Type == 'Admin' or a.Members_User.Member_Type == 'Crime Statistician' %}

                    {% if request.get_full_path == '/dashboard/' %}
                    <a href="{% url 'dashboard' %}" class="nav_link active"><i class='bx bxs-dashboard nav_icon'></i> 
                        <span class="nav_name">Dashboard</span></a> 
                    {% else %}
                    <a href="{% url 'dashboard' %}" class="nav_link"><i class='bx bxs-dashboard nav_icon'></i> 
                        <span class="nav_name">Dashboard</span></a> 
                    {% endif %}

                    {% if request.get_full_path == '/report/monthly' %}
                    <a href="{% url 'monthly_report' %}" class="nav_link active"><i class='fas fa-table nav_icon'></i> 
                        <span class="nav_name">Monthly Reports</span></a>
                    {% else %}
                    <a href="{% url 'monthly_report' %}" class="nav_link"><i class='fas fa-table nav_icon'></i> 
                        <span class="nav_name">Monthly Reports</span></a>
                    {% endif %}
                    
                    {% if request.get_full_path == '/incidents/view' %}
                    <a href="{% url 'view_incidents' %}" class="nav_link active"><i class='bx bxs-report nav_icon'></i> 
                        <span class="nav_name">Incident Reports</span></a> 
                    {% else %}   
                    <a href="{% url 'view_incidents' %}" class="nav_link"><i class='bx bxs-report nav_icon'></i> 
                    <span class="nav_name">Incident Reports</span></a> 
                    {% endif %}

                    {% if request.get_full_path == '/unsolvedcases' %}
                    <a href="{% url 'unsolved_cases' %}" class="nav_link active"><i class='bx bxs-briefcase-alt-2 nav_icon' ></i>
                        <span class="nav_name">Unsolved Cases</span></a>
                    {% else %}
                    <a href="{% url 'unsolved_cases' %}" class="nav_link"><i class='bx bxs-briefcase-alt-2 nav_icon' ></i>
                        <span class="nav_name">Unsolved Cases</span></a>
                    {% endif %}

                    {% if request.get_full_path == '/memberlist' %}
                    <a href="{% url 'admin_list_members' %}" class="nav_link active"><i class='bx bxs-group nav_icon'></i> 
                        <span class="nav_name">Members</span></a>
                    {% else %}
                    <a href="{% url 'admin_list_members' %}" class="nav_link"><i class='bx bxs-group nav_icon'></i> 
                        <span class="nav_name">Members</span></a>
                    {% endif %}

                    {% if request.get_full_path == '/investigators' %}
                    <a href="{% url 'admin_investigators' %}" class="nav_link active"><i class='bx bx-glasses-alt nav_icon'></i> 
                        <span class="nav_name">Investigators</span></a>
                    {% else %}
                    <a href="{% url 'admin_investigators' %}" class="nav_link"><i class='bx bx-glasses-alt nav_icon'></i> 
                        <span class="nav_name">Investigators</span></a>
                    {% endif %}

                    {% if request.get_full_path == '/notification' %}
                    <a href="{% url 'notification' %}" class="nav_link active"><i class='fas fa-bell nav_icon'></i>
                        <span class="mb-3 ms-1 position-fixed badge rounded-pill bg-danger" id="notif-count" style="font-size: 10px; float:left;"></span>
                        <span class="nav_name position-relative">Notifications</span></a>
                    {% else %}
                    <a href="{% url 'notification' %}" class="nav_link"><i class='fas fa-bell nav_icon'></i>
                        <span class="mb-3 ms-1 position-fixed badge rounded-pill bg-danger" id="notif-count" style="font-size: 10px; float:left;"></span>
                        <span class="nav_name position-relative">Notifications</span></a>
                    {% endif %}

                    {% if request.get_full_path == '/audit/members' %}
                    <a href="{% url 'admin_audit_members' %}" class="nav_link active"><i class='bx bx-history nav_icon' ></i> 
                        <span class="nav_name">Audit Trail</span> </a> 
                    {% else %}
                    <a href="{% url 'admin_audit_members' %}" class="nav_link"><i class='bx bx-history nav_icon' ></i> 
                        <span class="nav_name">Audit Trail</span> </a>  
                    {% endif %}

                    {% if request.get_full_path == '/public/settings' %}
                    <a href="{% url 'pub_notif_inbox' %}" class="nav_link active"><i class='fas fa-cogs '></i>
                        <span class="nav_name">Settings</span></a> 
                    {% else %}
                    <a href="{% url 'pub_notif_inbox' %}" class="nav_link"><i class='fas fa-cogs '></i>
                        <span class="nav_name">Settings</span></a> 
                    {% endif %}


                    {% else %}
                    {% if request.get_full_path == '/dashboard/' %}
                    <a href="{% url 'dashboard' %}" class="nav_link active"><i class='bx bxs-dashboard nav_icon'></i> 
                        <span class="nav_name">Dashboard</span></a> 
                    {% else %}
                    <a href="{% url 'dashboard' %}" class="nav_link"><i class='bx bxs-dashboard nav_icon'></i> 
                        <span class="nav_name">Dashboard</span></a> 
                    {% endif %}

                    {% if request.get_full_path == '/report/monthly' %}
                    <a href="{% url 'monthly_report' %}" class="nav_link active"><i class='fas fa-table nav_icon'></i> 
                        <span class="nav_name">Monthly Reports</span></a>
                    {% else %}
                    <a href="{% url 'monthly_report' %}" class="nav_link"><i class='fas fa-table nav_icon'></i> 
                        <span class="nav_name">Monthly Reports</span></a>
                    {% endif %}

                    {% if request.get_full_path == '/incidents/view' %}
                    <a href="{% url 'view_incidents' %}" class="nav_link active"><i class='bx bxs-report nav_icon'></i> 
                        <span class="nav_name">Incident Reports</span></a> 
                    {% else %}
                    <a href="{% url 'view_incidents' %}" class="nav_link"><i class='bx bxs-report nav_icon'></i> 
                        <span class="nav_name">Incident Reports</span></a> 
                    {% endif %}

                    {% if request.get_full_path == '/substation/notification' %}
                    <a href="{% url 'sub_notification' %}" class="nav_link active"><i class='fas fa-bell nav_icon'></i>
                        <span class="mb-3 ms-1 position-fixed badge rounded-pill bg-danger" id="notif-count" style="font-size: 10px; float:left;"></span>
                        <span class="nav_name position-relative">Notifications</span></a>
                    {% else %}
                    <a href="{% url 'sub_notification' %}" class="nav_link"><i class='fas fa-bell nav_icon'></i>
                        <span class="mb-3 ms-1 position-fixed badge rounded-pill bg-danger" id="notif-count" style="font-size: 10px; float:left;"></span>
                        <span class="nav_name position-relative">Notifications</span></a>
                    {% endif %}

                    {% if request.get_full_path == '/public/settings' %}
                    <a href="{% url 'pub_notif_inbox' %}" class="nav_link active"><i class='fas fa-cogs '></i>
                        <span class="nav_name">Settings</span></a> 
                    {% else %}
                    <a href="{% url 'pub_notif_inbox' %}" class="nav_link"><i class='fas fa-cogs '></i>
                        <span class="nav_name">Settings</span></a> 
                    {% endif %}
                    {% endif %}
                </div>
            </div> 
            <a href="{% url 'logout' %}" class="nav_link"> <i class='bx bx-log-out '></i> <span class="nav_name">Logout</span> </a>
        </nav>
    </div>      

    {% endifequal %}
    {% endfor %}
    
    <!------------------------------- NAVBAR FOR GENERAL PUBLIC----------------------------------------->
    {% for b in pub %}
    {% ifequal b.id request.session.public_id %}
    <!-- Profile picture -->
        <div class="header_img"> 
            <a href="{% url 'user_profile' %}">
                <img src="/media/{{ b.gen_profile }}" alt="Profile">
            </a>
        </div>
    </header>
    <!-- Navbar -->
    <div class="l-navbar" id="nav-bar">
        <nav class="nav main-nav">
            <div> 
            <a href="{% url 'dashboard' %}" class="nav_logo">
                <img src="{% static 'image/logo1.png' %}" class="img-fluid" style="width: 35px; margin-left:-5px;"></i> 
                <span class="nav_logo-name">
                <label style="color: #fff">ROAD</label><label style="color: #19B3D3">CAST</label></span> 
            </a>
            <!-- <div> <a href="{% url 'index' %}" class="nav_logo"> <img src="static/image/logo1.png" class="img-fluid" style="width: 35px; margin-left:-5px;"></i> <span class="nav_logo-name"><label style="color: #fff">ROAD</label><label style="color: #19B3D3">CAST</label></span> </a> -->
                <div class="nav_list"> 
                    {% if request.get_full_path == '/dashboard/' %}
                    <a href="{% url 'dashboard' %}" class="nav_link active"><i class='bx bxs-dashboard nav_icon'></i> 
                        <span class="nav_name">Dashboard</span></a> 
                    {% else %}
                    <a href="{% url 'dashboard' %}" class="nav_link"><i class='bx bxs-dashboard nav_icon'></i> 
                        <span class="nav_name">Dashboard</span></a> 
                    {% endif %}

                    {% if request.get_full_path == '/report/monthly' %}
                    <a href="{% url 'monthly_report' %}" class="nav_link active"><i class='fas fa-table nav_icon'></i> 
                        <span class="nav_name">Monthly Reports</span></a>
                    {% else %}
                    <a href="{% url 'monthly_report' %}" class="nav_link"><i class='fas fa-table nav_icon'></i> 
                        <span class="nav_name">Monthly Reports</span></a>
                    {% endif %}

                    {% if request.get_full_path == '/incidents/view' %}
                    <a href="{% url 'view_incidents' %}" class="nav_link active"><i class='bx bxs-report nav_icon'></i> 
                        <span class="nav_name">Incident Reports</span></a> 
                    {% else %}
                    <a href="{% url 'view_incidents' %}" class="nav_link"><i class='bx bxs-report nav_icon'></i> 
                        <span class="nav_name">Incident Reports</span></a> 
                    {% endif %}

                    {% if request.get_full_path == '/report/submit' %}
                    <a href="{% url 'submit_report' %}" class="nav_link active"><i class='bx bx-paper-plane nav_icon' ></i> 
                        <span class="nav_name">Send a Report</span></a>
                    {% else %}
                    <a href="{% url 'submit_report' %}" class="nav_link"><i class='bx bx-paper-plane nav_icon' ></i> 
                        <span class="nav_name">Send a Report</span></a>
                    {% endif %}

                    {% if request.get_full_path == '/public/inbox' %}
                    <a href="{% url 'public_inbox' %}" class="nav_link active"><i class='fas fa-bell nav_icon'></i>
                        <span class="mb-3 ms-1 position-fixed badge rounded-pill bg-danger" id="notif-count" style="font-size: 10px; float:left;"></span>
                        <span class="nav_name position-relative">Notifications</span></a>
                    {% else %}
                    <a href="{% url 'public_inbox' %}" class="nav_link"><i class='fas fa-bell nav_icon'></i>
                        <span class="mb-3 ms-1 position-fixed badge rounded-pill bg-danger" id="notif-count" style="font-size: 10px; float:left;"></span>
                        <span class="nav_name position-relative">Notifications</span></a>
                    {% endif %}

                    {% if request.get_full_path == '/public/settings' %}
                    <a href="{% url 'pub_notif_inbox' %}" class="nav_link active"><i class='fas fa-cogs '></i>
                        <span class="nav_name">Settings</span></a> 
                    {% else %}
                    <a href="{% url 'pub_notif_inbox' %}" class="nav_link"><i class='fas fa-cogs '></i>
                        <span class="nav_name">Settings</span></a> 
                    {% endif %}
                </div>
            </div> 
            <a href="{% url 'logout' %}" class="nav_link"> <i class='bx bx-log-out '></i> <span class="nav_name">Logout</span> </a>
        </nav>
    </div>        
    {% endifequal %}
    {% endfor %}
        

    <!-- Content here -->
    <div class=""style="padding-top: 60px;">
        {% block content %} {% endblock %}
    </div>
    <!--End content-->


    <!-- Scripts -->
    <script>
        document.addEventListener("DOMContentLoaded", function(event) {

        const showNavbar = (toggleId, navId, bodyId, headerId) =>{
            const toggle = document.getElementById(toggleId),
            nav = document.getElementById(navId),
            bodypd = document.getElementById(bodyId),
            headerpd = document.getElementById(headerId)

            // Validate that all variables exist
            if(toggle && nav && bodypd && headerpd){
                toggle.addEventListener('click', ()=>{
                // show navbar
                nav.classList.toggle('show')
                // change icon
                toggle.classList.toggle('bx-x')
                // add padding to body
                bodypd.classList.toggle('body-pd')
                // add padding to header
                headerpd.classList.toggle('body-pd')
                })
            }
        }

        showNavbar('header-toggle','nav-bar','body-pd','header')

        /*===== LINK ACTIVE =====*/
        const linkColor = document.querySelectorAll('.nav_link')

        function colorLink(){
            if(linkColor){
                linkColor.forEach(l=> l.classList.remove('active'))
                this.classList.add('active')
            }
        }
        linkColor.forEach(l=> l.addEventListener('click', colorLink))
        // Your code to run since DOM is loaded and ready
        });

        //For charts
        $(document).ready(function(){
            {% block jquery %} {% endblock %}
        })
    </script>

    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    
    <!-- JavaScript Bundle with Popper -->
    <script src="https://unpkg.com/popper.js/dist/umd/popper.min.js"></script>
    <script src="https://unpkg.com/tooltip.js/dist/umd/tooltip.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
    <!-- <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-/bQdsTh/da6pkI1MST/rWKFNjaCP5gBSY4sEBT38Q/9RBh9AH40zEOg7Hlq2THRZ" crossorigin="anonymous"></script> -->

    <!-- Latest compiled and minified JavaScript -->
    <!-- <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.min.js" integrity="sha384-Atwg2Pkwv9vp0ygtn1JAojH0nYbwNJLPhwyoVbhoPwBhjQPR5VtM2+xf0Uwh9KtT" crossorigin="anonymous"></script> -->
    <!-- <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script> -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.2.0/chart.min.js"></script>
</body>
</html>