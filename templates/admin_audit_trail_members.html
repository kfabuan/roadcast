{% extends 'nav_admin.html' %}

{% block title %} Audit Trail {% endblock %}

{% block content %}

{% if success_message %}
      <p class="alert alert-success">
          <strong>{{ success_message }}</strong>
      </p>
{% endif %}

{% if searched %}
      <p class="alert alert-primary">
          <strong>Showing the results for "{{ searched }}"</strong>
      </p>
{% endif %}

<div class="container">
  <!--Date
    <div class="top-content">
      
      <p id='date'>
      <i class="fas fa-calendar-day" id="date-today-icon"></i>
      <b id="date-today">Today: </b><span id="ct6"></span>
      </p>
    </div>-->
    
  <div class="btn-group" role="group" aria-label="Basic radio toggle button group" style="float: right;">
    <input type="radio" class="btn-check" name="btnradio" id="btnradio1" autocomplete="off" onclick="location.href = '/audit/members'" checked>
    <label class="btn btn-outline-primary" for="btnradio1">Members</label>
    
    <input type="radio" class="btn-check" name="btnradio" id="btnradio2" autocomplete="off"  onclick="location.href = '/audit/genpub'"> 
    <label class="btn btn-outline-primary" for="btnradio2">Departments</label>
  </div>
    
  <div class="section"><h3 style="font-family: Roboto, sans-serif; color: #1b5082;">Audit Trail
 
  <section style="height: 50px;"></section>

<form class="d-flex" method="POST">
      {% csrf_token %}
      <input class="form-control me-2" name="searched" type="search" placeholder="Search a member" style="font-family: 'Roboto', sans-serif">
      <button class="btn btn-outline-success" type="submit" style="transition: 0.5s;">Search</button>
    </form>

  </div>

  <section style="height: 20px;"></section>

  <!-- Main Content -->

  <div class="table-responsive"> 
    <table class="table table-hover table-borderless" style="font-family: 'Roboto',sans-serif; font-size: 15px;">
    <thead class="table-primary">
     <!--<th scope="col">No.</th>--> 
      <!-- <th>id</th> -->
      <th>Image</th>
      <th>Name</th>
      <th>Email</th>
      <th>Role</th>
      <!-- <th>Password</th> -->
      <th>Logged In</th>
     <!--<th>Operation</th>--> 
    </thead>
    <tbody>
  {% for a in audit %}
    <tr>
    <td><img src="/media/{{a.Genpub_id.gen_upload_id}}"style="width: 80px; height: 80px; object-fit: cover; border-radius: 50%;" /></td>
    <td>{{ a.Genpub_id.gen_fname }} {{a.Genpub_id.gen_surname}}</td>
    <td>{{ a.username}}</td>
 <!--   <td>{{ a.Genpun_id.Members_User}} </td>-->
    <td>{{ a.date_logged_in }}</td>
            
          {% empty %} 
      <td colspan="8" style="text-align: center;">Nothing to show! No records have been added yet.</td>
    </tr>
    {% endfor %}
    
   
 <!--      {% for a in genpub %}
     <tr>
     <td> {{ a.gen_fname}} {{ a.gen_surname }}</td>
     <td><img src = '{{ a.gen_upload_id.url}}' style="width: 80px; height: 80px; object-fit: cover; border-radius: 50%;"/> </td>
     <td>{{ a.gen_username }}</td>      
     {% for audit in audit %}
      <td>{{ audit.date_logged_in}}</td>
      {%endfor%}
       </tr>
      {%endfor%}
     
     {% for b in member %}
     <tr>     
     <td> {{ b.Members_Fname}} {{ b.Members_Lname }}</td>
      <td><img src = '{{ b.Members_Pic.url}}' style="width: 80px; height: 80px; object-fit: cover; border-radius: 50%;"/> </td>
      <td>{{ b.Members_Email }}</td>      
      {% for audit in audit %}
      <td>{{ audit.date_logged_in }}</td>
       {%endfor%}
     </tr> 
     {%endfor%}-->

    </tbody>
  </table>

  <section style="height: 50px;"></section>

  <script type="text/javascript">
    $(document).ready(function(){
      $('.nav_btn').click(function(){
        $('.mobile_nav_items').toggleClass('active');
      });

      $('#submit_form').click(function(){
        var selected_offense = new Array();
        var chk_tbl_offense = document.getElementById("tbl_offense");
        var selchk = chk_tbl_offense.getElementsByTagName("input");

        for (var i=0; i<selchk.length; i++) {
          if(selchk[i].checked){
            selected_offense.push(selchk[i].value);
          }
        }
        if(selected_offense.length>0){
          console.log(selected_offense);
         // document.getElementById('display_offense').innerHTML=selected_offense;
         var tryyyy =  document.getElementById('display_offense').value=selected_offense;

          alert(selected_offense);
          alert(tryyyy)
        }

        var incident_date = document.getElementById("DateCommitted").value;
        alert(incident_date);

        });

    });
    </script>
  
    <script>
      var today = new Date();
      var time = today.getHours() + ":" + today.getMinutes();
        document.getElementById("currentTime").value = time;
    </script>
{% endblock %}

{% block jquery %} 

{% endblock %}

